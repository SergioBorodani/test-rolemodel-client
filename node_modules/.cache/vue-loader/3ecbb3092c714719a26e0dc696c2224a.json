{"remainingRequest":"X:\\IdeaProjects\\test-rolemodel-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!X:\\IdeaProjects\\test-rolemodel-ui\\node_modules\\lyra-grid\\src\\LyraGrid.vue?vue&type=script&lang=js&","dependencies":[{"path":"X:\\IdeaProjects\\test-rolemodel-ui\\node_modules\\lyra-grid\\src\\LyraGrid.vue","mtime":499162500000},{"path":"X:\\IdeaProjects\\test-rolemodel-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"X:\\IdeaProjects\\test-rolemodel-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgoKaW1wb3J0IFNvY2tKUyBmcm9tICdzb2NranMtY2xpZW50JzsKaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSAnQHN0b21wL3N0b21wanMnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKaW1wb3J0IHsKICBnZXRGdWxsQ29udGV4dCwgZ2V0TWV0YWRhdGFVcmwsIGdldFNjcm9sbGJhY2tVcmwsIGdldFNob3dNZXNzYWdlRnVuY3Rpb24sCn0gZnJvbSAnLi91dGlsJzsKaW1wb3J0IGNyZWF0ZUdyaWQgZnJvbSAnLi9ncmlkJzsKaW1wb3J0IHsgcmVmcmVzaEdyaWQsIHNjcm9sbEJhY2ssIHNldENvbHVtbnNWaXNpYmlsaXR5IH0gZnJvbSAnLi9ncmlkMic7CgoKZXhwb3J0IGNvbnN0IGx5cmFHcmlkU29ja2V0ID0gbmV3IENsaWVudCh7CiAgd2ViU29ja2V0RmFjdG9yeSgpIHsKICAgIHJldHVybiBuZXcgU29ja0pTKGdldFNjcm9sbGJhY2tVcmwoKSk7CiAgfSwKCiAgb25Db25uZWN0KCkgewogICAgdGhpcy5zdWJzY3JpYmUoJy9wb3NpdGlvbicsIHRoaXMuc2Nyb2xsQmFja0dyaWQsIHsgaWQ6ICdseXJhLWdyaWQnIH0pOwogIH0sCgogIHNjcm9sbEJhY2tHcmlkKHNjcm9sbEJhY2tQYXJhbXMpIHsKICAgIGNvbnN0IHBhcmFtcyA9IEpTT04ucGFyc2Uoc2Nyb2xsQmFja1BhcmFtcy5ib2R5KTsKICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdiMke3BhcmFtcy5kZ3JpZElkfWApOwogICAgaWYgKGRpdiAmJiBkaXYucGFyZW50RWxlbWVudCAmJiBkaXYucGFyZW50RWxlbWVudC5fX3Z1ZV9fKSB7CiAgICAgIGNvbnN0IHsgZ3JpZCB9ID0gZGl2LnBhcmVudEVsZW1lbnQuX192dWVfXzsKICAgICAgc2Nyb2xsQmFjayhncmlkLCBwYXJhbXMucG9zaXRpb24pOwogICAgfQogIH0sCgogIGxvZ1Jhd0NvbW11bmljYXRpb246IHRydWUsCgogIGRlYnVnOiAoc3RyKSA9PiB7CiAgICBjb25zb2xlLmxvZyhzdHIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICB9LAp9KTsKbHlyYUdyaWRTb2NrZXQuYWN0aXZhdGUoKTsKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0x5cmFHcmlkJywKCiAgcHJvcHM6IHsKICAgIGZvcm1jbGFzczogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgaW5zdGFuY2VpZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgY29udGV4dDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoZWFkZXI6ICcnLAogICAgICBmb290ZXI6ICcnLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgZ3JpZERpdklkKCkgewogICAgICByZXR1cm4gYCR7dGhpcy5mb3JtY2xhc3N9LiR7dGhpcy5pbnN0YW5jZWlkfWAucmVwbGFjZSgvXC4vZywgJy0nKTsKICAgIH0sCiAgfSwKCiAgZ3JpZDogbnVsbCwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuJG9uKCdyZWZyZXNoJywgKGNvbnRleHQpID0+IHsKICAgICAgcmVmcmVzaEdyaWQodGhpcy5ncmlkLCBjb250ZXh0LCB0aGlzLnNob3dNZXNzYWdlKTsKICAgIH0pOwogICAgdGhpcy4kb24oJ3NldC1jb2x1bW5zLXZpc2liaWxpdHknLCAoY29sdW1ucykgPT4gewogICAgICBzZXRDb2x1bW5zVmlzaWJpbGl0eSh0aGlzLmdyaWQsIGNvbHVtbnMpOwogICAgfSk7CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGF4aW9zLnBvc3QoZ2V0TWV0YWRhdGFVcmwoKSwgewogICAgICBmb3JtQ2xhc3M6IHRoaXMuZm9ybWNsYXNzLAogICAgICBpbnN0YW5jZUlkOiB0aGlzLmluc3RhbmNlaWQsCiAgICAgIGNsaWVudFBhcmFtczogZ2V0RnVsbENvbnRleHQodGhpcy5jb250ZXh0KSwKICAgIH0sIHsKICAgICAgaGVhZGVyczogewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgIH0sCiAgICB9KQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGNvbnN0IGRpdiA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuZ3JpZERpdklkfWApOwogICAgICAgIHRyeSB7CiAgICAgICAgICBkaXYuc3R5bGUgPSBgd2lkdGg6JHttZXRhZGF0YS5jb21tb24uZ3JpZFdpZHRofTsgaGVpZ2h0OiR7bWV0YWRhdGEuY29tbW9uLmdyaWRIZWlnaHR9O2A7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5ncmlkID0gY3JlYXRlR3JpZCgKICAgICAgICAgIG1ldGFkYXRhLAogICAgICAgICAgdGhpcy5ncmlkRGl2SWQsCiAgICAgICAgICB0aGlzLmZvcm1jbGFzcywKICAgICAgICAgIHRoaXMuaW5zdGFuY2VpZCwKICAgICAgICAgIHRoaXMuY29udGV4dCwKICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UsCiAgICAgICAgICB0aGlzLmVtaXRFdmVudCwKICAgICAgICAgIHRoaXMuc2V0TGFiZWxzLAogICAgICAgICk7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICB0aGlzLnNob3dNZXNzYWdlKGVycm9yKTsKICAgICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgc2V0TGFiZWxzKGhlYWRlciwgZm9vdGVyKSB7CiAgICAgIHRoaXMuaGVhZGVyID0gaGVhZGVyOwogICAgICB0aGlzLmZvb3RlciA9IGZvb3RlcjsKICAgIH0sCiAgICBlbWl0RXZlbnQoZXZlbnRUeXBlLCBvYmopIHsKICAgICAgdGhpcy4kZW1pdChldmVudFR5cGUsIHRoaXMuZm9ybWNsYXNzLCB0aGlzLmluc3RhbmNlaWQsIG9iaik7CiAgICB9LAogICAgc2hvd01lc3NhZ2UobWVzc2FnZSkgewogICAgICBjb25zdCBzaG93TWVzc2FnZUZ1bmN0aW9uID0gZ2V0U2hvd01lc3NhZ2VGdW5jdGlvbigpOwogICAgICBpZiAoc2hvd01lc3NhZ2VGdW5jdGlvbikgewogICAgICAgIHNob3dNZXNzYWdlRnVuY3Rpb24odGhpcywgbWVzc2FnZSk7CiAgICAgIH0KICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpOwogICAgfSwKICB9LAoKCn07CgoK"},{"version":3,"sources":["LyraGrid.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"LyraGrid.vue","sourceRoot":"node_modules/lyra-grid/src","sourcesContent":["<template>\n  <div class=\"lyra-grid\">\n    <div v-html=\"header\" />\n    <div :id=\"gridDivId\" />\n    <div v-html=\"footer\" />\n  </div>\n</template>\n\n\n<style src=\"dgrid/css/dgrid.css\"></style>\n<style src=\"./css/lyra.css\"></style>\n\n\n<script>\n\n\nimport SockJS from 'sockjs-client';\nimport { Client } from '@stomp/stompjs';\nimport axios from 'axios';\n\nimport {\n  getFullContext, getMetadataUrl, getScrollbackUrl, getShowMessageFunction,\n} from './util';\nimport createGrid from './grid';\nimport { refreshGrid, scrollBack, setColumnsVisibility } from './grid2';\n\n\nexport const lyraGridSocket = new Client({\n  webSocketFactory() {\n    return new SockJS(getScrollbackUrl());\n  },\n\n  onConnect() {\n    this.subscribe('/position', this.scrollBackGrid, { id: 'lyra-grid' });\n  },\n\n  scrollBackGrid(scrollBackParams) {\n    const params = JSON.parse(scrollBackParams.body);\n    const div = document.querySelector(`div#${params.dgridId}`);\n    if (div && div.parentElement && div.parentElement.__vue__) {\n      const { grid } = div.parentElement.__vue__;\n      scrollBack(grid, params.position);\n    }\n  },\n\n  logRawCommunication: true,\n\n  debug: (str) => {\n    console.log(str); // eslint-disable-line no-console\n  },\n});\nlyraGridSocket.activate();\n\n\nexport default {\n  name: 'LyraGrid',\n\n  props: {\n    formclass: {\n      type: String,\n      default: null,\n    },\n    instanceid: {\n      type: String,\n      default: null,\n    },\n    context: {\n      type: Object,\n      default: null,\n    },\n  },\n\n  data() {\n    return {\n      header: '',\n      footer: '',\n    };\n  },\n\n  computed: {\n    gridDivId() {\n      return `${this.formclass}.${this.instanceid}`.replace(/\\./g, '-');\n    },\n  },\n\n  grid: null,\n\n  created() {\n    this.$on('refresh', (context) => {\n      refreshGrid(this.grid, context, this.showMessage);\n    });\n    this.$on('set-columns-visibility', (columns) => {\n      setColumnsVisibility(this.grid, columns);\n    });\n  },\n\n  mounted() {\n    axios.post(getMetadataUrl(), {\n      formClass: this.formclass,\n      instanceId: this.instanceid,\n      clientParams: getFullContext(this.context),\n    }, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((response) => {\n        const metadata = response.data;\n\n        const div = this.$el.querySelector(`#${this.gridDivId}`);\n        try {\n          div.style = `width:${metadata.common.gridWidth}; height:${metadata.common.gridHeight};`;\n        } catch (e) {\n          return;\n        }\n\n        this.grid = createGrid(\n          metadata,\n          this.gridDivId,\n          this.formclass,\n          this.instanceid,\n          this.context,\n          this.showMessage,\n          this.emitEvent,\n          this.setLabels,\n        );\n      })\n      .catch((error) => {\n        this.showMessage(error);\n      });\n  },\n\n  methods: {\n    setLabels(header, footer) {\n      this.header = header;\n      this.footer = footer;\n    },\n    emitEvent(eventType, obj) {\n      this.$emit(eventType, this.formclass, this.instanceid, obj);\n    },\n    showMessage(message) {\n      const showMessageFunction = getShowMessageFunction();\n      if (showMessageFunction) {\n        showMessageFunction(this, message);\n      }\n      throw new Error(message);\n    },\n  },\n\n\n};\n\n\n</script>\n"]}]}